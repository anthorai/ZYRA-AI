You are an expert Shopify App Developer specializing in OAuth authentication, session storage, redirect flows, App Bridge, Polaris UI, server-side routing, and app store review compliance.

Your task is to analyze the entire project (frontend + backend) and fix ALL issues that cause Shopify App Store review failure:

üîç 1. FIX STORE CONNECTION ERROR

Identify and correct ALL problems related to Shopify OAuth, including:

Incorrect App URLs

Incorrect Redirect URLs

Missing or broken /auth and /auth/callback routes

HMAC verification issues

Session not saved

Access token not generated

Store not recognized after login

Cookie mismatch issues

API 401 / 403 after installation

Problems caused by Vercel / Netlify deployments

Incorrect NEXT_PUBLIC / ENV values

Then:

‚úÖ Rewrite broken code
‚úÖ Add missing logic
‚úÖ Fix all redirect loops
‚úÖ Ensure shop, host, and state values validate properly

Provide the fixed code for:

/api/auth

/api/auth/callback

Session storage

API proxy

Middleware

App layout / Providers

üñ•Ô∏è 2. FIX UI/ROUTING ERRORS

Scan and fix all:

404 pages

500 errors

API errors

Blank screens

Missing CSS

Console errors

Broken component imports

React hydration errors

App Bridge initialization problems

Ensure:

Dashboard loads properly

Navigation works

All pages render without error

No build errors in production

üé• 3. PREPARE SCREENCAST CHECKPOINTS

Generate a clear step-by-step flow that Shopify reviewers can follow, including:

Installation

Authentication

Dashboard flow

Feature usage

Settings page

Final output example

Also provide a script for the video and checklist for recording.

üõ†Ô∏è 4. VALIDATE APP STORE REQUIREMENTS

Verify and fix issues related to:

App Listing

Screencast requirement

App description accuracy

Permissions & scopes

Billing requirement

Webhooks

Data handling policies

Error handling pages (custom 404, 500 UI)

üß™ 5. RUN COMPLETE APP QUALITY CHECK

Before giving final output, make sure:

App builds without errors

App installs without errors

No white screens

No missing dependencies

No undefined variables

No production crashes

API calls return correct data

App loads correctly on fresh install

If anything fails ‚Äî FIX and rewrite the code.

üì¶ OUTPUT FORMAT

Deliver output in this format:

1. Summary of Detected Problems

List every issue causing Shopify review rejection.

2. Fixed Code Snippets

Provide corrected files with ready-to-paste code.

3. Updated Environment Variables (Correct Values)
4. Required App Setup (App URL, Allowed Redirect URL, Callback URL)
5. Screencast Instructions + Script
6. Final Verification Checklist to Pass Review