Because ZYRA AI is NOT embedded, the billing flow is simpler and cleaner.

When user clicks ‚ÄúUpgrade with Shopify‚Äù

‚û°Ô∏è Redirect the browser directly to Shopify Admin‚Äôs pricing page for YOUR app

No iframes
No _top redirects
No Billing API calls
No custom checkout

üîó EXACT REDIRECT URL (THIS IS THE KEY)
https://admin.shopify.com/store/{store_handle}/charges/{app_handle}/pricing_plans

Replace:

{store_handle} ‚Üí shop name without .myshopify.com

{app_handle} ‚Üí your exact app handle (from shopify.app.toml / Partner Dashboard)

Example

If:

Shop = awesome-store.myshopify.com

App handle = zyra-ai

‚úÖ Redirect to:

https://admin.shopify.com/store/awesome-store/charges/zyra-ai/pricing_plans


This opens Shopify‚Äôs official plan selection UI for ZYRA AI.

üß† HOW SHOPIFY KNOWS WHICH PLAN

Shopify does NOT read your UI plan cards.

It shows:

Plans configured in Partner Dashboard ‚Üí Pricing

Public + private plans

Trial info

Billing interval

User selects the plan inside Shopify, not your app.

‚úî This is exactly how Klaviyo-style pricing works.

üß© WHAT YOU MUST STORE (MANDATORY)

During OAuth install, Shopify sends:

?shop=awesome-store.myshopify.com


You must:

Save shopDomain

Derive store_handle

Associate it with the logged-in Zyra account

This is the only data needed to build the pricing URL.

üß± BUTTON IMPLEMENTATION (CORRECT)
Option A ‚Äî Direct link (simplest)
<a href="https://admin.shopify.com/store/awesome-store/charges/zyra-ai/pricing_plans">
  Upgrade with Shopify
</a>

Option B ‚Äî Backend redirect (recommended)

Frontend:

<a href="/billing/upgrade">Upgrade with Shopify</a>


Backend:

Look up merchant shop

Build pricing URL

Return 302 redirect

‚úî Works for any store
‚úî Works in dev + production
‚úî Shopify-review compliant

üîÅ AFTER PAYMENT (WELCOME LINK)

Configure Welcome Link in Partner Dashboard:

https://zyra.ai/welcome


Shopify will redirect back with:

shop

charge_id

You then:

Verify subscription (webhook or Admin API)

Activate plan in ZYRA AI

Show ‚ÄúPlan activated‚Äù UI

‚ùå COMMON MISTAKES (CAUSE 90% OF ERRORS)

‚ùå Using a copied charge confirmation URL
‚ùå Hardcoding store name
‚ùå Wrong app handle
‚ùå Redirecting to your own pricing page
‚ùå Expecting Shopify to read your plan cards

üß† ONE-LINE RULE (MEMORIZE THIS)

Non-embedded app + Managed Pricing = always redirect to

https://admin.shopify.com/store/{store_handle}/charges/{app_handle}/pricing_plans